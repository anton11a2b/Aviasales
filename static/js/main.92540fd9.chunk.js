(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{15:function(t,e,c){t.exports={app:"app_app__1pbwi",app__logo:"app_app__logo__1S9Im",app__content:"app_app__content__2uF4o",app__main:"app_app__main__274Ts"}},24:function(t,e,c){t.exports={filter:"filter_filter__27_4F",filter__title:"filter_filter__title__3rhst",filter__input:"filter_filter__input__OUqw7"}},28:function(t,e,c){t.exports={tab:"tab_tab__3AMkx","tab--active":"tab_tab--active__2hOsl"}},29:function(t,e,c){t.exports={filters:"filters_filters__lWz7u",filters__title:"filters_filters__title__1yb8r"}},34:function(t,e,c){t.exports={tabs:"tabs_tabs__2KcJi"}},35:function(t,e,c){t.exports={showMore:"showMore_showMore__2OBcj"}},40:function(t,e,c){t.exports={zeroFlights:"zeroFlights_zeroFlights__L4X6Z"}},53:function(t,e,c){},66:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c.n(n),i=c(17),r=c.n(i),s=c(7),o=c(13),u=c.n(o),l=c(23),j="CHECKED",b="SHOW_MORE",p="ACTIVE_TAB",f="GET_TICKETS",_="ERROR_STATUS",d="ENABLE_LOADER",O="DISABLE_LOADER",h=function(){return{type:O}},m=function(t){return{type:_,payload:t}},k=function(t){return function(){var e=Object(l.a)(u.a.mark((function e(c){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({type:d}),n=function(){var e=Object(l.a)(u.a.mark((function e(){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t.searchId));case 3:if(!((a=e.sent).status>=500)){e.next=7;break}throw n(),new Error(a.status);case 7:if(!(a.status>=400&&a.status<500)){e.next=9;break}throw new Error(a.status);case 9:return e.next=11,a.json();case 11:i=e.sent,c({type:f,payload:i.tickets}),!1===i.stop&&n(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),c(h()),"500"!==e.t0.message&&c(m(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=c(28),v=c.n(x),g=c(1),y=function(t){var e=t.title,c=t.id,n=t.isActive,a=Object(s.b)(),i=v.a.tab;n&&(i+=" ".concat(v.a["tab--active"]));return Object(g.jsx)("button",{onClick:function(){a(function(t){return{type:p,payload:t}}(c))},className:i,type:"button",children:e})};y.defaultProps={id:0,title:"",isActive:!1};var N=y,w=c(34),S=c.n(w),T=function(){var t=Object(s.c)((function(t){return t.tabs}));return Object(g.jsx)("div",{className:S.a.tabs,children:t.map((function(t){return Object(g.jsx)(N,{id:t.id,title:t.title,isActive:t.active},t.id)}))})},E=c(24),A=c.n(E),D=function(t){var e=t.title,c=t.filter,n=Object(s.b)();return Object(g.jsxs)("div",{className:A.a.filter,children:[Object(g.jsx)("input",{id:e,name:e,type:"checkbox",onChange:function(){n({type:j,payload:c})},checked:c.checked,className:A.a.filter__input}),Object(g.jsx)("label",{className:A.a.filter__title,htmlFor:e,children:e})]})};D.defaultProps={title:"",filter:{}};var M=D,z=c(29),C=c.n(z),F=function(){var t=Object(s.c)((function(t){return t.filters}));return Object(g.jsxs)("aside",{className:C.a.filters,children:[Object(g.jsx)("h2",{className:C.a.filters__title,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),t.map((function(t){return Object(g.jsx)(M,{title:t.title,filter:t},t.id)}))]})},q=c(35),I=c.n(q),R=function(){var t=Object(s.b)();return Object(g.jsx)("button",{onClick:function(){t({type:b})},className:I.a.showMore,type:"button",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})},B=c(73),L=c(71),W=c(70),H=c(74),J=c(8),K=c.n(J),P=function(t){var e=t.date,c=t.stops,n=t.price,a=t.carrier,i=t.backDate,r=t.duration,s=t.backStops,o=t.departure,u=t.destination,l=t.backDuration;function j(t){var e=Math.trunc(t/60),c=t%60;return 0===c?"".concat(e," \u0447."):"".concat(e," \u0447. ").concat(c," \u043c\u0438\u043d.")}function b(t){return t.length>0?t.join(", "):null}function p(t){switch(t.length){case 0:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";case 3:return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";default:return null}}function f(t){return Object(L.a)(Object(W.a)(t),"hh:mm")}function _(t,e){return Object(L.a)(Object(H.a)(Object(W.a)(t),{hours:Math.trunc(e/60),minutes:e%60}),"hh:mm")}return Object(g.jsxs)("div",{className:K.a.ticket,children:[Object(g.jsxs)("div",{className:K.a.ticket__header,children:[Object(g.jsxs)("p",{className:K.a.ticket__price,children:[function(t){var e=String(t).split("").slice(0,2).join("");return"".concat(e," ").concat(String(t).split("").slice(2).join(""))}(n)," \u20bd "]}),Object(g.jsx)("img",{src:"//pics.avs.io/99/36/".concat(a,".png"),alt:"Airline logo"})]}),Object(g.jsxs)("div",{className:K.a.ticket__info,children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{className:K.a["ticket__title-info"],children:[o," \u2014 ",u]}),Object(g.jsxs)("p",{className:K.a["ticket__main-info"],children:[f(e),"\u2013",_(e,r)]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:K.a["ticket__title-info"],children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(g.jsx)("p",{className:K.a["ticket__main-info"],children:j(r)})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:K.a["ticket__title-info"],children:p(c)}),Object(g.jsx)("p",{className:K.a["ticket__main-info"],children:b(c)})]})]}),Object(g.jsxs)("div",{className:K.a.ticket__info,children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{className:K.a["ticket__title-info"],children:[u," \u2014 ",o]}),Object(g.jsxs)("p",{className:K.a["ticket__main-info"],children:[f(i),"\u2013",_(i,l)]})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:K.a["ticket__title-info"],children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(g.jsx)("p",{className:K.a["ticket__main-info"],children:j(l)})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{className:K.a["ticket__title-info"],children:p(s)}),Object(g.jsx)("p",{className:K.a["ticket__main-info"],children:b(s)})]})]})]})};P.defaultProps={price:0,duration:0,backDuration:0,stops:[],backStops:[],date:"",carrier:"",backDate:"",departure:"",destination:""};var U=P,Z=c(72),G=(c(53),c(54),function(){return Object(g.jsx)("div",{className:"spinner",children:Object(g.jsx)(Z.a,{size:"large"})})}),V=function(t){return"Failed to fetch"===t?"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443!":t>="400"&&t<"500"?"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0434\u0430\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c.":null},X=c(40),Q=c.n(X),Y=function(){var t=Object(s.c)((function(t){return t})).errorStatus,e=V(t)?V(t):"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.";return Object(g.jsx)("span",{className:Q.a.zeroFlights,children:e})},$=function(t,e){return 2===e?t.sort((function(t,e){return t.segments[0].duration+t.segments[1].duration-(e.segments[0].duration+e.segments[1].duration)})):3===e?t.sort((function(t,e){return t.price+t.segments[0].duration+t.segments[1].duration-(e.price+e.segments[0].duration+e.segments[1].duration)})):t.sort((function(t,e){return t.price-e.price}))},tt=c(9),et=function(t,e){var c=e.filter((function(t){return t.checked})).map((function(t){return t.id})),n=[];return e.every((function(t){return t.checked}))?t:(c.some((function(t){return 2===t}))&&(n=Object(tt.a)(new Set([].concat(Object(tt.a)(n),Object(tt.a)(t.filter((function(t){return 0===t.segments[0].stops.length||0===t.segments[1].stops.length}))))))),c.some((function(t){return 3===t}))&&(n=Object(tt.a)(new Set([].concat(Object(tt.a)(n),Object(tt.a)(t.filter((function(t){return 1===t.segments[0].stops.length||1===t.segments[1].stops.length}))))))),c.some((function(t){return 4===t}))&&(n=Object(tt.a)(new Set([].concat(Object(tt.a)(n),Object(tt.a)(t.filter((function(t){return 2===t.segments[0].stops.length||2===t.segments[1].stops.length}))))))),c.some((function(t){return 5===t}))&&(n=Object(tt.a)(new Set([].concat(Object(tt.a)(n),Object(tt.a)(t.filter((function(t){return 3===t.segments[0].stops.length||3===t.segments[1].stops.length}))))))),0===n.length?null:n)},ct=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t})),c=e.tickets,a=e.activeTab,i=e.filters,r=e.quantityTickets,o=e.loading,j=e.errorStatus,b=et($(c,a),i),p=!(o||j||!b),f=o&&!j?Object(g.jsx)(G,{}):null,_=!(f||b);return Object(n.useEffect)((function(){t(function(){var t=Object(l.a)(u.a.mark((function t(e){var c,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://front-test.beta.aviasales.ru/search");case 3:if((c=t.sent).ok){t.next=6;break}throw new Error(c.status);case 6:return t.next=8,c.json();case 8:n=t.sent,e(k(n)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e(m(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(n.useEffect)((function(){0!==c.length&&t(h())}),[c,t]),Object(g.jsxs)("section",{children:[p&&b.slice(0,r).map((function(t){return Object(g.jsx)(U,{price:t.price,carrier:t.carrier,date:t.segments[0].date,stops:t.segments[0].stops,backDate:t.segments[1].date,backStops:t.segments[1].stops,departure:t.segments[0].origin,duration:t.segments[0].duration,backDuration:t.segments[1].duration,destination:t.segments[0].destination},Object(B.a)())})),f,_&&Object(g.jsx)(Y,{})]})},nt=c.p+"static/media/logo.ae0b194c.png",at=c(15),it=c.n(at),rt=function(){var t=Object(s.c)((function(t){return t})),e=t.quantityTickets,c=t.loading,n=t.errorStatus,a=!(!e||c||n);return Object(g.jsxs)("div",{className:it.a.app,children:[Object(g.jsx)("img",{className:it.a.app__logo,src:nt,alt:"logo"}),Object(g.jsxs)("div",{className:it.a.app__content,children:[Object(g.jsx)(F,{}),Object(g.jsxs)("main",{className:it.a.app__main,children:[Object(g.jsx)(T,{}),Object(g.jsx)(ct,{}),a&&Object(g.jsx)(R,{})]})]})]})},st=c(41),ot=c(20),ut=c(42),lt=c(5),jt={activeTab:1,loading:!0,errorStatus:"",quantityTickets:5,tabs:[{id:1,title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0451\u0432\u044b\u0439",active:!0},{id:2,title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439",active:!1},{id:3,title:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439",active:!1}],filters:[{id:1,title:"\u0412\u0441\u0435",checked:!1},{id:2,title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:!0},{id:3,title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:!0},{id:4,title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!1},{id:5,title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!1}],tickets:[]},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(lt.a)(Object(lt.a)({},t),{},{errorStatus:e.payload});case d:return Object(lt.a)(Object(lt.a)({},t),{},{loading:!0});case O:return Object(lt.a)(Object(lt.a)({},t),{},{loading:!1});case b:return Object(lt.a)(Object(lt.a)({},t),{},{quantityTickets:t.quantityTickets+5});case p:return Object(lt.a)(Object(lt.a)({},t),{},{tabs:t.tabs.map((function(t){return t.id===e.payload?Object(lt.a)(Object(lt.a)({},t),{},{active:!0}):Object(lt.a)(Object(lt.a)({},t),{},{active:!1})})),activeTab:e.payload});case f:return Object(lt.a)(Object(lt.a)({},t),{},{tickets:[].concat(Object(tt.a)(t.tickets),Object(tt.a)(e.payload))});case j:if(1===e.payload.id)return Object(lt.a)(Object(lt.a)({},t),{},{filters:t.filters.map((function(t){return Object(lt.a)(Object(lt.a)({},t),{},{checked:!e.payload.checked})}))});var c=Object(lt.a)(Object(lt.a)({},t),{},{filters:t.filters.map((function(t){return e.payload.id===t.id?Object(lt.a)(Object(lt.a)({},t),{},{checked:!t.checked}):t}))});return c.filters[0].checked=c.filters.slice(1).every((function(t){return t.checked})),c.quantityTickets=c.filters.some((function(t){return t.checked}))?5:null,c;default:return t}},pt=Object(ot.createStore)(bt,Object(ut.composeWithDevTools)(Object(ot.applyMiddleware)(st.a)));r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(s.a,{store:pt,children:Object(g.jsx)(rt,{})})}),document.getElementById("root"))},8:function(t,e,c){t.exports={ticket:"ticket_ticket__2BcHv",ticket__header:"ticket_ticket__header__26URT",ticket__info:"ticket_ticket__info__3az38",ticket__price:"ticket_ticket__price__3CgdM","ticket__title-info":"ticket_ticket__title-info__jo4hh","ticket__main-info":"ticket_ticket__main-info__3_ZWz"}}},[[66,1,2]]]);
//# sourceMappingURL=main.92540fd9.chunk.js.map